kos32-gcc -c -I/home/bob/dev-netsurf/workspace/netsurf/kolibrios -I/home/bob/kolibrios/contrib/sdk/sources/newlib/libc/include -I/home/bob/dev-netsurf/workspace/netsurf/kolibrios  -I/home/bob/kolibrios/contrib/sdk/sources/zlib  -std=c99 -D_KOLIBRIOS -Dnskolibrios -g   -Wundef   -U_Win32 -U_WIN32 -U__MINGW32__   -U__BSD_VISIBLE   -D_BSD_SOURCE   -D_DEFAULT_SOURCE   -D_XOPEN_SOURCE=700   -D_POSIX_C_SOURCE=200809L   -D_NETBSD_SOURCE   -U HAVE_UTSNME main.c kolibri_debug.c

kos32-ld main.o kolibri_debug.o -T/home/bob/kolibrios/contrib/sdk/sources/newlib/libc/app.lds -nostdlib -L/home/autobuild/tools/win32/mingw32/lib -lgcc /home/autobuild/tools/win32/lib/libz.a /home/autobuild/tools/win32/lib/libdll.a /home/autobuild/tools/win32/lib/libapp.a /home/autobuild/tools/win32/lib/libc.dll.a -o mainbin -Map=mb.map

objcopy -O binary mainbin mainbinkos


/* main.c */
#include<kolibri_debug.h>

int main(int argc, char *argv[])
{
  debug_board_write_str("Netsurf");
}


/* kolibri_debug.c */
/* Write a printf() like function (variable argument list) for 
   writing to debug board */

void debug_board_write_byte(const char ch){
    __asm__ __volatile__(
    "int $0x40"
    :
    :"a"(63), "b"(1), "c"(ch));
}

void debug_board_write_str(const char* str){
  while(*str)
    debug_board_write_byte(*str++);
}


/* kolibri_debug.h */
#ifndef KOLIBRI_DEBUG_H
#define KOLIBRI_DEBUG_H

/* Write a printf() like function (variable argument list) for 
   writing to debug board */

void debug_board_write_byte(const char ch);
void debug_board_write_str(const char* str);
#endif /* KOLIBRI_DEBUG_H */


Issues:
Binary crashes after call to entry(img) from crt3.c .
Not exactly sure where the crash occurs because I cannot find the definition of entry function in the source code.
